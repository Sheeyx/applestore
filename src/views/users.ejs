<%- include('includes/header') %>

<link rel="stylesheet" type="text/css" href="/css/users.css" />

<body>
  <div class="dashboard-container">
    <div class="navigation-menu">
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" href="/admin/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/admin/product/all">Menu</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/admin/user/all">Users</a>
        </li>
        <li class="nav-item" onclick="return confirm('Do you really want to logout?')">
          <a class="nav-link" href="/admin/logout">Logout</a>
        </li>
      </ul>
    </div>

    <div class="main-content">
      <% if(!member) { %>
      <div class="welcome-message">
        <h2>Please login first!</h2>
      </div>
      <% } else { %>
      <div class="user-table">
        <h2 class="header-name">All Users List</h2>
        <table class="table table-hover table-sm">
          <thead class="thead-light">
            <tr>
              <th scope="col">No</th>
              <th scope="col">Name</th>
              <th scope="col">Phone</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            <% 
              // Mock data for users
              const users = [
                { _id: 1, memberNick: 'Jamshid', memberPhone: '01083939321', memberStatus: 'ACTIVE' },
                { _id: 2, memberNick: 'Anvar', memberPhone: '01083939322', memberStatus: 'ACTIVE' },
                { _id: 3, memberNick: 'John', memberPhone: '821010101010', memberStatus: 'ACTIVE' },
                { _id: 4, memberNick: 'David', memberPhone: '01083939324', memberStatus: 'ACTIVE' },
                { _id: 5, memberNick: 'Alice', memberPhone: '01083939320', memberStatus: 'BLOCK' }
              ];

              users.forEach(function(value, index) { 
            %>
            <tr>
              <td><%= index + 1 %></td>
              <td><%= value.memberNick %></td>
              <td><%= value.memberPhone %></td>
              <td>
                <select class="spec-select member-status" id="<%= value._id %>">
                  <option value="ACTIVE" <%= value.memberStatus === 'ACTIVE' ? 'selected' : '' %>>ACTIVE</option>
                  <option value="BLOCK" <%= value.memberStatus === 'BLOCK' ? 'selected' : '' %>>BLOCK</option>
                  <option value="DELETE" <%= value.memberStatus === 'DELETE' ? 'selected' : '' %>>DELETE</option>
                </select>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
      <% } %>
    </div>
  </div>

  <script type="text/javascript" src="/js/users.js"></script>

  <%- include('includes/footer') %>
</body>
